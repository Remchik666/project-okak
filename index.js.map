{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/render-functions.js","../src/js/feedbacks.js","../src/js/nav.js","../src/js/mob-menu.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getGenres() {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = `/genres`;\n    const url = baseURL + endPoint;\n    const res = await axios.get(url);\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nexport async function getArtists({\n  currentPage = 1,\n  name = '',\n  sortName = 'asc',\n  genre = '',\n} = {}) {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = '/artists';\n    const url = baseURL + endPoint;\n    const params = {\n      limit: 8,\n      page: currentPage,\n      ...(name && { name }),\n      ...(sortName && { sortName }),\n      ...(genre && { genre }),\n    };\n\n    const res = await axios.get(url, { params });\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nexport async function getArtistId(id = '65ada227af9f6d155db46908') {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = `/artists/${id}`;\n    const url = baseURL + endPoint;\n    const res = await axios.get(url);\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nexport async function getArtistIdAlbums(id = '65ada227af9f6d155db46908') {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = `/artists/${id}/albums`;\n    const url = baseURL + endPoint;\n    const res = await axios.get(url);\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nexport async function getFeedBacks() {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = '/feedbacks';\n    const url = baseURL + endPoint;\n    const params = {\n      limit: 12,\n    };\n\n    const res = await axios.get(url, { params });\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nexport async function postFeedBack(name, rating, descr) {\n  try {\n    const baseURL = 'https://sound-wave.b.goit.study/api';\n    const endPoint = `/feedbacks`;\n    const url = baseURL + endPoint;\n    const data = {\n      name: name,\n      rating: rating,\n      descr: descr,\n    };\n    const res = await axios.post(url, data);\n    return res.data;\n  } catch (e) {\n    iziToast.error({\n      message: `${e}`,\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\n// //Приклад роботи\n// async function initMainPage() {\n//   //жанри нічого не приймає\n//   const genres = await getGenres();\n//   console.log('genres        ', genres);\n\n//   //приймає об'єкт з параметрами\n//   const artists = await getArtists({ sortName: 'asc', name: 'Bob' });\n//   console.log('artists        ', artists);\n\n//   // нічого не приймає\n//   const feedBacks = await getFeedBacks();\n//   console.log('feedBacks      ', feedBacks);\n\n//   // приймає id\n//   const artistId = await getArtistId('65ada227af9f6d155db46908');\n//   console.log('artistId       ', artistId);\n//   // приймає id\n//   const artistIdAlbums = await getArtistIdAlbums('65ada227af9f6d155db46908');\n//   console.log('artistIdAlbums ', artistIdAlbums);\n\n//   // //пост\n//   // const post = await postFeedBack(\n//   //   'Jhonny Depp',\n//   //   4.5,\n//   //   'Some text with user`s comment about application'\n//   // );\n//   // console.log(post);\n// }\n// initMainPage();\n// // розкоментувати для прикладу\n","import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\nexport function createFeedBack(feedBacks) {\n  const feedBackMarkup = feedBacks\n    .map(({ _id, name, rating, descr }) => {\n      const roundedRating = Math.round(rating * 2) / 2;\n      const starsMarkup = Array.from({ length: 5 })\n        .map((_, i) => {\n          const starFill = Math.min(Math.max(roundedRating - i, 0), 1);\n          const fillPercent = starFill * 100;\n          return `\n      <span class=\"star-container\" style=\"position: relative; width: 20px; height: 20px; display: inline-block;\">\n        <svg class=\"star star--empty\" width=\"20\" height=\"20\" style=\"position: absolute; top: 0; left: 0;\">\n          <use href=\"/img/icons/icons.svg#star\" fill=\"#fff\"></use>\n        </svg>\n        <div class=\"star-fill-wrapper\" style=\"width: ${fillPercent}%; height: 20px; overflow: hidden; position: absolute; top: 0; left: 0;\">\n          <svg class=\"star star--filled\" width=\"20\" height=\"20\">\n            <use href=\"/img/icons/icons.svg#star\" fill=\"#764191\"></use>\n          </svg>\n        </div>\n      </span>`;\n        })\n        .join('');\n      return `\n      <div class=\"swiper-slide\" data-id=\"${_id}\">\n        <div class=\"star-rating\">${starsMarkup}</div>\n        <p class=\"feedback-descr\">${descr}</p>\n        <p class=\"feedback-name\">${name}</p>\n      </div>`;\n    })\n    .join('');\n\n  const markup = `\n    <div class=\"swiper modal-product__slider\">\n      <div class=\"custom-swiper-button-prev\">\n        <svg class=\"swiper-nav-icon\" width=\"24\" height=\"24\">\n          <use href=\"/img/icons/icons.svg#icon-left-arrow-alt\"></use>\n        </svg>\n      </div>\n      <div class=\"swiper-wrapper\">\n        ${feedBackMarkup}\n      </div>\n      <div class=\"custom-swiper-button-next\">\n        <svg class=\"swiper-nav-icon\" width=\"24\" height=\"24\">\n          <use href=\"/img/icons/icons.svg#icon-right-arrow-alt\"></use>\n        </svg>\n      </div>\n      <div class=\"swiper-pagination custom-pagination\"></div>\n    </div>\n  `;\n\n  const container = document.querySelector('.feedback-container');\n  container.innerHTML = markup;\n\n  new Swiper('.modal-product__slider', {\n    speed: 1000,\n    slidesPerView: 1,\n    spaceBetween: 10,\n    navigation: {\n      nextEl: '.custom-swiper-button-next',\n      prevEl: '.custom-swiper-button-prev',\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n      renderBullet: function (index, className) {\n        if (index < 3) {\n          return `<span class=\"${className}\" data-bullet=\"${index}\"></span>`;\n        }\n        return '';\n      },\n    },\n    on: {\n      slideChange: function (swiper) {\n        const bullets = document.querySelectorAll('.swiper-pagination span');\n        bullets.forEach(b =>\n          b.classList.remove('swiper-pagination-bullet-active')\n        );\n        const activeIndex = swiper.activeIndex;\n        const total = swiper.slides.length;\n        if (activeIndex === 0) {\n          bullets[0].classList.add('swiper-pagination-bullet-active');\n        } else if (activeIndex === total - 1) {\n          bullets[2].classList.add('swiper-pagination-bullet-active');\n        } else {\n          bullets[1].classList.add('swiper-pagination-bullet-active');\n        }\n      },\n    },\n    autoplay: {\n      delay: 5000,\n    },\n  });\n}\n","import { getFeedBacks } from './soundwave-api';\nimport { createFeedBack } from './render-functions';\n\nasync function renderFeedbackSection() {\n  try {\n    const response = await getFeedBacks();\n    console.log('API response:', response);\n    if (response && response.data) {\n      createFeedBack(response.data);\n    } else {\n      console.warn('No feedbacks found or wrong format:', response);\n    }\n  } catch (error) {\n    console.error('Failed to load feedbacks:', error);\n  }\n}\n\nrenderFeedbackSection();\n","const sections = document.querySelectorAll('section[id]');\nconst navLinks = document.querySelectorAll('.nav-menu-link');\nconst header = document.querySelector('.header');\nconst headerHeight = header.offsetHeight;\nconst OFFSET = 100;\n\nwindow.addEventListener('scroll', () => {\n  let currentSectionId = null;\n\n  sections.forEach(section => {\n    const rect = section.getBoundingClientRect();\n    const sectionId = section.getAttribute('id');\n\n    if (\n      rect.top <= headerHeight + OFFSET &&\n      rect.bottom > headerHeight + OFFSET\n    ) {\n      currentSectionId = sectionId;\n    }\n  });\n\n  navLinks.forEach(link => {\n    const href = link.getAttribute('href').replace('#', '');\n\n    if (href === currentSectionId) {\n      link.classList.add('active');\n    } else {\n      link.classList.remove('active');\n    }\n  });\n});\n","import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\n(() => {\n  const mobileMenu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n\n  const toggleMenu = () => {\n    const anchors = mobileMenu.querySelectorAll('a[href*=\"#\"]');\n    const isMenuOpen =\n      openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n\n    openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n    mobileMenu.classList.toggle('is-open');\n\n    if (!isMenuOpen) {\n      disableBodyScroll(document.body);\n      anchors.forEach(anchor => {\n        anchor.addEventListener('click', toggleMenu);\n      });\n    } else {\n      enableBodyScroll(document.body);\n      anchors.forEach(anchor => {\n        anchor.removeEventListener('click', toggleMenu);\n      });\n    }\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  window.matchMedia('(min-width: 767px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    mobileMenu.classList.remove('is-open');\n    openMenuBtn.setAttribute('aria-expanded', false);\n    enableBodyScroll(document.body);\n  });\n})();\n"],"names":["getFeedBacks","url","params","axios","e","iziToast","createFeedBack","feedBacks","markup","_id","name","rating","descr","roundedRating","starsMarkup","_","i","container","Swiper","index","className","swiper","bullets","b","activeIndex","total","renderFeedbackSection","response","error","sections","navLinks","header","headerHeight","OFFSET","currentSectionId","section","rect","sectionId","link","mobileMenu","openMenuBtn","closeMenuBtn","toggleMenu","anchors","isMenuOpen","enableBodyScroll","anchor","disableBodyScroll"],"mappings":"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"}